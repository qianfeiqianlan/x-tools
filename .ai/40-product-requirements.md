# 40 - 产品需求与设计约束（工具类网站）

本文件定义**产品级**需求与设计约束，来源见根目录 `command.md`。开发或扩展「工具类网站」功能时 MUST 遵守本文件；与 00/10/20/30 冲突时，产品需求优先于通用样板约定（如单工具页可不强求 api.ts/store 若为纯前端工具）。

---

## 一、产品定位

- **类型**：工具类网站（高效、实用、极简）
- **目标用户**：程序员及需要在线工具的用户
- **核心诉求**：快速解决问题，不绕路；输入→操作→结果，三步闭环

---

## 二、核心设计原则（MUST）

1. **极简高效**：砍掉所有非必要元素；输入→操作→结果，三步闭环
2. **功能聚焦**：单页面只做 1 个工具，不堆砌功能，避免干扰
3. **即时反馈**：操作后秒出结果，减少等待，降低认知成本
4. **一致性**：所有工具的交互、布局、视觉风格统一，降低学习成本
5. **响应式**：适配 PC（主力）、平板，兼顾移动端（程序员偶尔应急用）

---

## 三、整体架构

### 1. 页面结构（3 层）

- **顶层导航栏**：固定顶部（不随滚动消失），包含「Logo + 工具分类 + 搜索框 + 深色模式切换」，极简不占地
- **侧边分类栏（可选，PC 端）**：折叠式，分类清晰；点击直接跳转对应工具
- **主内容区**：单工具专属页面，核心承载「输入区 + 操作区 + 结果区」，无多余模块

### 2. 工具分类逻辑（易扩展）

按功能场景分，便于用户一眼找到、开发易扩展：

| 分类       | 工具示例 |
|------------|----------|
| 编码解码   | URL Encode/Decode、Base64 编解码 |
| 数据格式化 | JSON 格式化/压缩、XML 格式化 |
| 文本处理   | 在线文本对比、文本去重/替换 |
| 时间工具   | 世界时间、时间戳转换 |

### 3. 首页设计

- 顶部：**常用工具快捷入口**（如 JSON 格式化、URL 编解码、文本对比、世界时间），大按钮 + 图标，一键跳转
- 中间：**搜索框**，支持工具名模糊搜索（如搜「json」直接跳对应工具）
- 底部：极简版权/链接，保证首页加载速度

---

## 四、单工具页通用模式（MUST）

- **布局**：输入区 + 操作区 + 结果区；PC 可上下分栏或左右分栏（如输入 70%、结果 30%）
- **操作**：顶部或操作区放主操作（如 Encode/Decode 切换、格式化/对比按钮）；结果区右侧「一键复制」，复制后微提示（约 1 秒消失）
- **辅助**：清空输入、交换输入/结果等小按钮，极简图标即可
- **错误**：无效输入时**精准提示错误位置**（如「第 5 行缺少逗号」），而非笼统报错

---

## 五、四类核心工具交互规范（参考）

### 1. URL Encode/Decode

- 布局：上下分栏（输入区→结果区）或左右分栏（PC）；输入区约 70% 高度，结果区约 30%
- 操作：顶部「Encode/Decode」切换（默认 Encode），切换后自动处理输入；输入即自动处理（可选「手动处理」开关）；结果区「一键复制」；底部「清空输入」「交换输入结果」

### 2. JSON 格式化

- 布局：输入区（上）+ 结果区（下）；结果区分「格式化视图」「压缩视图」切换
- 交互：输入框支持粘贴、上传 JSON 文件；底部「格式化」「压缩」「校验」按钮；结果区格式化缩进、语法高亮（键蓝、值绿、字符串橙）、折叠/展开节点；无效 JSON 精准提示错误位置；结果区支持「下载 JSON」「复制全部」

### 3. 在线文本对比

- 布局：左右双输入区（文本 A / 文本 B），底部结果区（差异展示）；移动端可上下分栏
- 交互：支持粘贴、上传文本文件；顶部「对比」按钮，秒出差异；差异高亮：新增绿、删除红、修改黄，行号标注；支持「只看差异」「全屏对比」；同步滚动（左右/结果区联动）；操作：「清空 A/B」「交换 A/B」「复制差异结果」

### 4. 世界时间

- 布局：顶部城市搜索框 + 添加按钮，中间时间卡片流（PC 网格，移动端单列）
- 交互：预设常用城市（北京、纽约、伦敦、东京等），支持搜索添加/删除；时间卡片：城市名、当前时间、日期、时区、昼夜图标；附加：「切换 24/12 小时制」「同步本地时间」

---

## 六、视觉风格（开发实现 MUST 对齐）

### 1. 配色（2 套，支持深色模式）

- **浅色模式（默认）**  
  - 背景：`#F8F9FA`  
  - 文字：主 `#212529`，次 `#6C757D`  
  - 强调色：`#165DFF`（按钮/高亮/链接）  
  - 功能色：成功/复制 `#00B42A`，错误/删除 `#F53F3F`，警告/差异 `#FF7D00`

- **深色模式（一键切换）**  
  - 背景：`#121212`  
  - 文字：主 `#E0E0E0`，次 `#909090`  
  - 强调色：`#4D89FF`；功能色同浅色，可适当降低饱和度

- 实现：用 **CSS 变量** 定义颜色，便于主题切换与维护

### 2. 字体与排版

- 字体：无衬线优先，如 `Inter`，备选 `Roboto`、`PingFang SC`；代码类工具结果区可用等宽字体如 `Consolas`
- 字号层级：标题（工具名）18px 粗体；输入/结果区 14px（代码可 13px）；按钮/提示 12px
- 间距：输入框内边距 12px，模块间距 16px，按钮 8px 16px，留白充足

### 3. 组件样式

- 输入框：无边框或细灰边框 1px，圆角 4px，聚焦蓝色边框高亮，无多余阴影
- 主按钮（格式化/对比/复制）：蓝色背景、白字、圆角 4px，hover 加深
- 次按钮（清空/切换）：浅灰背景、深灰字，hover 变深灰
- 卡片（如世界时间）：白底/深色底，圆角 8px，轻阴影（如 `1px 2px 8px rgba(0,0,0,0.05)`）

---

## 七、细节优化（建议实现）

1. **快捷键**：如 Ctrl+Enter 格式化、Ctrl+C 复制结果、Esc 清空输入
2. **历史记录**：localStorage 存最近使用的工具/输入内容（可选）
3. **常用收藏**：收藏常用工具，顶部快捷入口（可选）
4. **微动画**：复制成功等微交互，过渡简洁；拒绝冗余动画，保证加载速度
5. **无广告/无弹窗**：纯工具属性，靠简洁留客
6. **加载优化**：单工具页懒加载、代码压缩、图标用 SVG，保证秒开

---

## 八、开发友好约定

1. **组件化**：输入框、按钮、结果区、复制按钮等做成通用组件，所有工具复用
2. **响应式断点**：仅设 2 个断点（PC ≥768px，移动端 <768px），优先保证 PC 体验
3. **样式统一**：用 CSS 变量定义颜色、字号、间距，后续改主题只改变量
4. **功能优先级**：先做核心工具（JSON、URL 编解码、文本对比），再迭代世界时间，后续扩展其他工具，快速上线迭代

---

## 九、需求清单与开发优先级（后续开发可照此排期）

| 优先级 | 需求项 |
|--------|--------|
| P0     | 顶层导航栏（Logo、分类、搜索、深色模式）；主内容区骨架（输入区+操作区+结果区） |
| P0     | 首页：常用工具快捷入口 + 搜索框 + 极简底部 |
| P1     | 工具：URL Encode/Decode（Encode/Decode 切换、自动处理、一键复制、清空/交换） |
| P1     | 工具：JSON 格式化/压缩/校验（格式化视图/压缩视图、语法高亮、错误位置提示、下载/复制） |
| P1     | 工具：在线文本对比（双输入、差异高亮、同步滚动、清空/交换/复制） |
| P2     | 工具：世界时间（预设城市、搜索添加、时间卡片、24/12 小时制、同步本地时间） |
| P2     | 侧边分类栏（折叠式、按分类跳转） |
| P3     | 快捷键、历史记录、常用收藏、微动画；更多工具（Base64、XML、文本去重等） |

生成或修改「工具类」相关代码时，请优先查阅本文件及 `.ai/30-ui-engineering.md`（视觉与工程化细节）。
