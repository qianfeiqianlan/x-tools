# Task Playbook - 添加单工具页

当任务意图为「添加新工具 / 新工具页 / 某工具功能」时，按本 playbook 执行。须同时遵守 `.ai/40-product-requirements.md`（产品需求与设计约束）。

---

## 1. 工具页在项目中的位置

- **路由**：每个工具对应一个路由，如 `/tools/json-format`、`/tools/url-encode`
- **Feature**：建议按工具分类建 feature，如 `features/tools/` 下按子域或单工具建目录；或 `features/json-format/`、`features/url-encode/` 等
- **页面**：单工具页仅做 1 个工具，布局为「输入区 + 操作区 + 结果区」

---

## 2. 单工具页结构（MUST）

- **输入区**：文本框或文件上传，支持粘贴；必要时占约 70% 高度（或左侧 70% 宽）
- **操作区**：主操作（如 Encode/Decode 切换、格式化、对比） + 辅助（清空、交换、校验等）；按钮使用通用组件
- **结果区**：展示结果；右侧或底部显眼位置「一键复制」，复制后微提示（约 1 秒）；若为代码/JSON，支持语法高亮与折叠

---

## 3. 通用组件复用（MUST）

- 输入框、按钮、结果区容器、复制按钮等使用 `src/components/` 下通用组件；若无则先抽象再复用
- 样式统一：颜色、字号、间距、圆角按 `.ai/30-ui-engineering.md` 与 `.ai/40-product-requirements.md` 第六节

---

## 4. 错误与反馈

- 无效输入：**精准提示错误位置**（如「第 5 行缺少逗号」），禁止笼统报错
- 复制成功：微提示（Toast）约 1 秒消失
- 操作反馈：即时（秒出结果），避免长时间无反馈

---

## 5. 注册步骤（执行清单）

- [ ] 在 `src/features/` 下新建或选定工具 feature，添加页面组件（如 `JsonFormatPage.tsx`）
- [ ] 在 `src/app/router.tsx` 中注册路由（如 `/tools/json-format`）
- [ ] 在主导航或侧边分类栏中增加该工具入口（与工具分类逻辑一致）
- [ ] 若为首页快捷入口，在首页添加快捷按钮/链接
- [ ] 若工具为纯前端、无后端接口，可不建 `api.ts`，仅保留 `store.ts`（可选）、`types.ts`、`pages/`

---

## 6. 自检

- 单页只做 1 个工具，无多余功能堆砌
- 布局为输入区 + 操作区 + 结果区，且有一键复制与即时反馈
- 样式与全局配色、字体、组件一致
- 响应式在 768px 断点下可用的体验可接受

详细交互规范见 `.ai/40-product-requirements.md` 第四、五节；视觉规范见 `.ai/30-ui-engineering.md`。
